{{ define "content" }}

<!-- What is this author's name ? -->
{{- $thisauthor := .Params.author -}}

<!-- Get the details from the authors csv -->
{{- $url := "/csv/authors.csv" -}}
{{- $sep := "," -}}
{{- range $i, $r := getCSV $sep $url -}}
    {{- $author := index $r 8 -}}
    {{- if eq $author $thisauthor -}}
        {{- $.Scratch.Set "profession" (index $r 9) -}}
        {{- $.Scratch.Set "nationality" (index $r 10) -}}
        {{- $.Scratch.Set "dob" (index $r 11) -}}
        {{- $.Scratch.Set "dod" (index $r 12) -}}
        {{- $.Scratch.Set "briefbio" (index $r 13) -}}
        {{- $.Scratch.Set "fullbio" (index $r 17) -}}
    {{- end -}}
{{- end -}}

{{- if isset .Params "background" -}}
<img src="{{ .Params.background }}" style="position: fixed; right: 0; top: 0; width: 100%; height: auto; z-index: -1; opacity: 0.6;" />
{{- end -}}

<div class="section bb">
    <div class="container">
        <div class="row">
            <div class="col s12 m9 l9">
                <h2>{{ .Params.author }}</h2>
                <div class="grid">

                    <div class="gutter-sizer"></div>
                    <div class="grid-sizer"></div>

                    <!-- <div class="gi s12 m12 l4">
                        <div class="card fluid center">
                            <h2 class="c-quotes-gradient">
                                {{- .Params.Author -}}
                            </h2>
                        </div>
                    </div> -->

                    <!-- <div class="grid-item">
                        <div class="card">
                            <h3>BIO</h3>
                            <p>{{- $.Scratch.Get "briefbio" -}}</p>
                        </div>
                    </div> -->

                    {{ $.Scratch.Set "image" .Params.image }}
                    {{- $url := "/csv/quotes.csv" -}}
                    {{- $sep := "," -}}
                    {{- range $i, $r := getCSV $sep $url -}}
                    {{- $author := index $r 3 -}}
                    {{- if eq $author $thisauthor -}}
                    {{- $quote := index $r 8 -}}
                    {{- if lt ($quote | countwords) 10 -}}
                        <div class="gi s12 m6 l3">
                    {{- else if lt ($quote | countwords) 20 -}}
                        <div class="gi s12 m6 l4">
                    {{- else -}}
                        <div class="gi s12 m6 l4">
                    {{- end -}}
                        <figure class="z-depth-5">
                            <img src="{{ $.Scratch.Get "image" }}" />
                            <blockquote>{{ $quote | humanize }}</blockquote>
                            <figcaption>{{ $author }}</figcaption>
                        </figure>
                        <!-- <blockquote class="z-depth-{{ index (seq 5 | shuffle) 0 }}"> -->
                    </div>
                    {{- end -}}
                    {{ end }}

                </div>
                
            </div>

            <div class="col s12 m3 l3">
                <div class="card fluid">
                    <h2>Profile</h2>
                    <h4>{{ $thisauthor }}</h4>
                    <!-- <h3 class="quotes-gradient-text">Nationality</h3> -->
                    <h4>{{ $.Scratch.Get "nationality" }}</h4>
                    <!-- <h3 class="quotes-gradient-text">Profession</h3> -->
                    <h4>{{ $.Scratch.Get "profession" }}</h4>
                    <!-- <h3 class="quotes-gradient-text">Date of Birth</h3> -->
                    <h4>DOB {{ $.Scratch.Get "dob" }}</h4>
                    <!-- <h3 class="quotes-gradient-text">Full Bio</h3> -->
                    <h4><a target="_blank" href="{{ $.Scratch.Get "fullbio" }}">Full Bio (Wikipedia) ></a></h4>
                </div>
                
                <h2>Other Autors</h2>
                {{ $related := .Site.RegularPages.Related . | first 5 }}
                {{ with $related }}
                    {{ range . }}
                        {{ partial "card-quotes-by-author-horizontal.html" .}} 
                    {{ end }}
                {{ end }}

                <br/><br />
                <h2>Also See</h2>
                {{ $related := .Site.RegularPages.Related . | first 5 }}
                {{ with $related }}
                {{ range . }}
                {{ partial "card-quotes-by-author-horizontal.html" .}}
                {{ end }}
                {{ end }}

            </div>

        </div>
    </div>
</div>

{{ end }}